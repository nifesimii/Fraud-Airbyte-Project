# apiVersion: v1
# kind: PersistentVolumeClaim
# metadata:
#   name: airflow-logs
#   namespace: airflow
# spec:
#   accessModes:
#     - ReadWriteOnce  # ‚Üê Changed from ReadWriteMany
#   resources:
#     requests:
#       storage: 5Gi
#   storageClassName: local-path # For Rancher Desktop/K3s

# 2. Create the PV and PVC for logs

apiVersion: v1
kind: PersistentVolume
metadata:
  name: airflow-logs-pv
spec:
  capacity:
    storage: 5Gi
  accessModes:
    - ReadWriteMany
  hostPath:
    path: /tmp/airflow-logs
    type: DirectoryOrCreate
  storageClassName: ""
  persistentVolumeReclaimPolicy: Retain
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: airflow-logs
  namespace: airflow
spec:
  accessModes:
    - ReadWriteMany
  resources:
    requests:
      storage: 5Gi
  storageClassName: ""
  volumeName: airflow-logs-pv